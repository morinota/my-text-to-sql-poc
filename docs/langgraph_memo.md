# Langgraphメモ

## Langgraphにおける概念

- LLM（大規模言語モデル）は非常に強力であり、**特にretrieverやAPIなどの他のシステムと接続されているときにその力を発揮する**。
  - これが、多くのLLMアプリケーションがLLM呼び出しの前後にステップの制御フローを使用する理由。
  - ex. RAGは質問に関連する文書を取得し、それらの文書をLLMに渡して応答を作る。
- LLMの前後にあるstepの制御フローは、しばしば「チェーン」と呼ばれる。
  - チェーンはLLMを用いたプログラミングの人気のあるパラダイムであり、高い信頼性を提供する。
- しかし、**LLM自身が制御フローを選択できるLLMシステム**が必要なケースがある。
  - これがエージェントの定義：**エージェントは、アプリケーションの制御フローを決定するためにLLMを使用するシステム**。
    - チェーンとは異なり、エージェントはアプリケーション内の**ステップの順序に対してLLMにある程度のコントロールを委ねる**。
  - アプリケーションの制御を決定するためにLLMを使用するケースの例
    - 多くのツールの中からどれを呼び出すかを決定するためにLLMを使用する
    - 生成された回答が十分か、さらなる作業が必要かを決定するためにLLMを使用する
- さまざまなタイプのエージェントアーキテクチャがあり、LLMに異なるレベルの制御を与える。
  - あるアーキテクチャでは、ルーターはLLMに指定されたオプションのセットから単一のステップを選択させる。(=Agentレベル2!)
  - 他方、完全に自律的な長時間実行エージェントは、特定の問題に対して任意のステップのシーケンスを選択する完全な自由を持つケースもある。(=Agentレベル3!)

### Langchainのコア原則

- LangGraphのモチベーション
  - エージェントにアプリケーションに対するより多くの制御を与えながら、より高い信頼性を維持するために曲線を曲げる手助けをすることです。
- 信頼性のあるエージェントを構築するのに適したLangGraphの具体的な柱達:
  
#### Controllability 制御可能性

- LangGraphは、アプリケーションのフローをノードとエッジのセットとして表現することにより、開発者に高い制御度を提供する。
- すべてのノードは共通の状態（メモリ）にアクセスし、これを変更できる。
- アプリケーションの制御フローは、ノードを接続するエッジを使用して、決定論的にまたは条件付きロジックを介して設定できる。

#### Persistence 永続性

- LangGraphは、短期または長期（例：データベースを介して）メモリを使用してグラフ状態を永続化するための多くのオプションを開発者に提供する

#### Human-in-the-Loop ヒューマン・イン・ザ・ループ

- 

LangGraphでは、エージェント間の相互作用を「State」、「Node」、「Edge」という3つの要素を使用してグラフとして構築する。

- State
- Node
- Edge
